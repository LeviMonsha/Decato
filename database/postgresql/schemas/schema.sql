SET search_path TO decatopg;

-- Категории курсов
INSERT INTO course_category (id, name, description, parent_category_id) VALUES
('a1b2c3d4-5678-4abc-8def-000000000001', 'Data Science', 'Все курсы по Data Science', NULL),
('a1b2c3d4-5678-4abc-8def-000000000002', 'Машинное обучение', 'Курсы по алгоритмам и техникам машинного обучения', 'a1b2c3d4-5678-4abc-8def-000000000001'),
('a1b2c3d4-5678-4abc-8def-000000000003', 'Визуализация данных', 'Курсы по эффективной визуализации данных', 'a1b2c3d4-5678-4abc-8def-000000000001'),
('a1b2c3d4-5678-4abc-8def-000000000004', 'Статистика и математика', 'Математические основы Data Science', 'a1b2c3d4-5678-4abc-8def-000000000001');

-- Курсы
INSERT INTO course (id, title, description, difficulty_level, category_id, img_url, sort_order) VALUES
('b1c2d3e4-5678-4abc-8def-000000000001', 'Введение в машинное обучение', 'Изучите основы машинного обучения, включая методы с учителем и без.', 2, 'a1b2c3d4-5678-4abc-8def-000000000002', 'http://localhost:8085/remote.php/webdav/resources/course/c1/c1.jpg', 1),
('b1c2d3e4-5678-4abc-8def-000000000002', 'Визуализация данных на Python', 'Освойте визуализацию данных с помощью Matplotlib и Seaborn.', 1, 'a1b2c3d4-5678-4abc-8def-000000000003', 'http://localhost:8085/remote.php/webdav/resources/course/c2/c2.jpg', 1),
('b1c2d3e4-5678-4abc-8def-000000000003', 'Статистика для Data Science', 'Понимание вероятностей, распределений и статистических выводов.', 3, 'a1b2c3d4-5678-4abc-8def-000000000004', 'http://localhost:8085/remote.php/webdav/resources/course/c3/c3.jpg', 1);

-- Главы
INSERT INTO chapter (id, course_id, title, sort_order, description) VALUES
('c1d2e3f4-5678-4abc-8def-000000000001', 'b1c2d3e4-5678-4abc-8def-000000000001', 'Обучение с учителем', 1, 'Изучение алгоритмов регрессии и классификации.'),
('c1d2e3f4-5678-4abc-8def-000000000002', 'b1c2d3e4-5678-4abc-8def-000000000001', 'Обучение без учителя', 2, 'Изучение кластеризации и методов снижения размерности.'),
('c1d2e3f4-5678-4abc-8def-000000000003', 'b1c2d3e4-5678-4abc-8def-000000000002', 'Основы Matplotlib', 1, 'Введение в построение графиков с Matplotlib.'),
('c1d2e3f4-5678-4abc-8def-000000000004', 'b1c2d3e4-5678-4abc-8def-000000000003', 'Теория вероятностей', 1, 'Основы теории вероятностей и случайных величин.');

-- Задания для курса 1 (Введение в машинное обучение)

INSERT INTO task (id, chapter_id, type, content, sort_order) VALUES
(
  'd1e2f3a4-5678-4abc-8def-000000000001',
  'c1d2e3f4-5678-4abc-8def-000000000001',
  'THEORY',
  '{
    "title": "Введение в машинное обучение",
    "chapter": "Общее представление",
    "sections": [
      {
        "heading": "Что такое машинное обучение?",
        "paragraphs": [
          "Машинное обучение — это наука, изучающая алгоритмы, которые автоматически улучшаются благодаря опыту."
        ]
      },
      {
      "heading": "Исторический пример",
      "paragraphs": [
        "Когда Алан Тьюринг работал над расшифровкой сообщений, закодированных машиной Энигма, он использовал перебор вариантов. Люди с этой задачей справлялись плохо, зато машина могла решить её сравнительно быстро."
      ],
        "image": {
          "url": "http://localhost:8085/remote.php/webdav/resources/course/c1/c1-1.jpeg",
          "alt": "Иллюстрация процесса обучения"
        }
      },
      {
        "heading": "Почему не все задачи можно решить программированием",
        "paragraphs": [
          "Далеко не для каждой задачи, с которой люди справляются с трудом, можно написать программу для эффективного поиска решения.",
          "Есть целый класс задач (NP-трудные задачи), которые нельзя решить за разумное время, и задачи, которые для людей просты, но крайне трудно формализуются в программу."
        ],
        "examples": [
          "Перевести текст с одного языка на другой",
          "Диагностировать болезнь по симптомам",
          "Сравнить релевантность документов",
          "Распознать изображение",
          "Оценить стоимость недвижимости"
        ]
      },
      {
        "heading": "Объекты, ответы и модель",
        "paragraphs": [
          "Решение задач можно записать как функцию, которая отображает объекты (samples) в предсказания (targets).",
          "Функция, отображающая объекты в предсказания, называется моделью, а набор примеров — обучающей выборкой или датасетом."
        ]
      },
      {
        "heading": "Постановка задачи",
        "paragraphs": [
          "Задачи машинного обучения делятся на обучение с учителем (supervised learning) и без учителя (unsupervised learning).",
          "В обучении с учителем правильные ответы известны заранее. Примеры: регрессия, бинарная классификация, многоклассовая классификация, multilabel классификация, ранжирование.",
          "В обучении без учителя ответы неизвестны, пример — кластеризация."
        ],
        "image": {
          "url": "http://localhost:8085/remote.php/webdav/resources/course/c1/c1-2.jpg",
          "alt": "обучение с учителем (supervised learning) и без учителя (unsupervised learning)"
        }
      },
      {
        "heading": "Виды задач обучения с учителем",
        "paragraphs": [
          "Регрессия: предсказание числовых значений.",
          "Бинарная классификация: два класса.",
          "Многоклассовая классификация: более двух классов.",
          "Многоклассовая классификация с пересекающимися классами (multilabel).",
          "Ранжирование: упорядочивание объектов."
        ]
      },
      {
        "heading": "Другие виды задач",
        "paragraphs": [
          "Порождение новых объектов (генерация).",
          "Сегментация изображений.",
          "Обучение с подкреплением (reinforcement learning)."
        ]
      },
      {
        "heading": "Критерии качества и метрики",
        "paragraphs": [
          "Для оценки моделей используются различные метрики качества: accuracy, precision, recall и другие.",
          "Метрики могут быть бизнес-метриками, онлайн-метриками, офлайн-метриками.",
          "Цель — найти модель, для которой значение метрики будет оптимальным."
        ],
        "examples": [
          "Доля правильно поставленных диагнозов (accuracy)",
          "Точность (precision)",
          "Полнота (recall)"
        ]
      }
    ],
    "additional_info": {
      "references": [
        "https://education.yandex.ru/handbook/ml/article/mashinnoye-obucheniye",
        "Turing, A. M. (1950). Computing Machinery and Intelligence.",
        "Goodfellow, Bengio, Courville. Deep Learning, 2016."
      ],
      "glossary": {
        "Модель": "Функция, отображающая объекты в предсказания.",
        "Обучающая выборка": "Набор примеров, используемый для обучения модели.",
        "Регрессия": "Задача предсказания числового значения.",
        "Классификация": "Задача предсказания класса объекта.",
        "Ранжирование": "Задача упорядочивания объектов по релевантности."
      }
    }
  }'::jsonb,
  1
),
(
  'd1e2f3a4-5678-4abc-8def-000000000002',
  'c1d2e3f4-5678-4abc-8def-000000000001',
  'THEORY',
  '{
    "title": "Линейные модели",
    "chapter": "Линейные модели от линейной до логистической регрессии. Регуляризация, работа с категориальными признаками, многоклассовая классификация",
    "sections": [
      {
        "heading": "Почему модели линейные?",
        "paragraphs": [
          "Представьте, что у вас есть множество объектов XX, а вы хотели бы каждому объекту сопоставить какое-то значение. К примеру, у вас есть набор операций по банковской карте, а вы бы хотели, понять, какие из этих операций сделали мошенники. Если вы разделите все операции на два класса и нулём обозначите законные действия, а единицей мошеннические, то у вас получится простейшая задача классификации. Представьте другую ситуацию: у вас есть данные геологоразведки, по которым вы хотели бы оценить перспективы разных месторождений. В данном случае по набору геологических данных ваша модель будет, к примеру, оценивать потенциальную годовую доходность шахты. Это пример задачи регрессии. Числа, которым мы хотим сопоставить объекты из нашего множества иногда называют таргетами (от английского target).",
          "Таким образом, задачи классификации и регрессии можно сформулировать как поиск отображения из множества объектов XX в множество возможных таргетов.",
          "Разберёмся, как будет работать такая модель в случае, если D=1D=1. То есть у наших объектов есть ровно один численный признак, по которому они отличаются. Теперь наша линейная модель будет выглядеть совсем просто: y=w1x1+w0y=w1​x1​+w0​. Для задачи регрессии мы теперь пытаемся приблизить значение игрек какой-то линейной функцией от переменной икс. А что будет значить линейность для задачи классификации? Давайте вспомним про пример с поиском мошеннических транзакций по картам. Допустим, нам известна ровно одна численная переменная — объём транзакции. Для бинарной классификации транзакций на законные и потенциально мошеннические мы будем искать так называемое разделяющее правило: там, где значение функции положительно, мы будем предсказывать один класс, где отрицательно – другой. В нашем примере простейшим правилом будет какое-то пороговое значение объёма транзакций, после которого есть смысл пометить транзакцию как подозрительную."
        ],
        "image": {
          "url": "http://localhost:8085/remote.php/webdav/resources/course/c1/c1-2_1.jpg",
          "alt": "Классификация и регрессия"
        }
      },
      {
      "heading": "Сведение к задаче оптимизации",
      "paragraphs": [
        "Мы хотим, чтобы на нашем датасете (то есть на парах (xi,yi)(xi​,yi​) из обучающей выборки) функция fwfw​ как можно лучше приближала нашу зависимость."
      ],
        "image": {
          "url": "http://localhost:8085/remote.php/webdav/resources/course/c1/c1-2_2.jpg",
          "alt": "Оптимизация"
        }
      }
    ]
  }'::jsonb,
  2
),
-- Вопрос 1
(
  'd1e2f3a4-5678-4abc-8def-000000000003',
  'c1d2e3f4-5678-4abc-8def-000000000002',
  'QUIZ',
  '{
    "question": "Что такое нейронная сеть?",
    "options": [
      { "id": "e1f2a3b4-5678-4abc-8def-000000000001", "text": "Модель для обработки изображений", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000002", "text": "Математическая модель, вдохновлённая биологическими нейронами", "is_correct": true },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000003", "text": "Тип базы данных", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000004", "text": "Язык программирования", "is_correct": false }
    ]
  }'::jsonb,
  9
),
-- Вопрос 2
(
  'd1e2f3a4-5678-4abc-8def-000000000008',
  'c1d2e3f4-5678-4abc-8def-000000000002',
  'QUIZ',
  '{
    "question": "Что такое переобучение (overfitting)?",
    "options": [
      { "id": "e1f2a3b4-5678-4abc-8def-000000000005", "text": "Модель плохо обучается", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000006", "text": "Модель слишком хорошо запомнила обучающие данные и плохо работает на новых", "is_correct": true },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000007", "text": "Ошибка в данных", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000008", "text": "Ошибка в алгоритме", "is_correct": false }
    ]
  }'::jsonb,
  10
),
-- Вопрос 3
(
  'd1e2f3a4-5678-4abc-8def-000000000009',
  'c1d2e3f4-5678-4abc-8def-000000000002',
  'QUIZ',
  '{
    "question": "Что такое обучение с учителем?",
    "options": [
      { "id": "e1f2a3b4-5678-4abc-8def-000000000009", "text": "Обучение без заранее известных ответов", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000010", "text": "Обучение с использованием размеченных данных", "is_correct": true },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000011", "text": "Обучение с помощью нейронных сетей", "is_correct": false },
      { "id": "e1f2a3b4-5678-4abc-8def-000000000012", "text": "Обучение без использования данных", "is_correct": false }
    ]
  }'::jsonb,
  11
);

-- Задания для курса 2 (Визуализация данных на Python)

INSERT INTO task (id, chapter_id, type, content, sort_order) VALUES
(
  'd1e2f3a4-5678-4abc-8def-000000000005',
  'c1d2e3f4-5678-4abc-8def-000000000003',
  'GRAPH',
  '{
    "text": "Проанализируйте график функции активации.",
    "graph_url": "images/relu_graph.png",
    "questions": [
      "Какое значение функции при x = -1?",
      "Какое значение функции при x = 2?"
    ]
  }'::jsonb,
  1
),
(
  'd1e2f3a4-5678-4abc-8def-000000000006',
  'c1d2e3f4-5678-4abc-8def-000000000003',
  'ML',
  '{
    "text": "Обучите простую нейронную сеть на предоставленном датасете и загрузите файл с предсказаниями.",
    "dataset_url": "datasets/neural_network_training.csv",
    "submission_format": "CSV с колонкой ''prediction''"
  }'::jsonb,
  2
);

-- Задания для курса 3 (Статистика для Data Science)

INSERT INTO task (id, chapter_id, type, content, sort_order) VALUES
(
  'd1e2f3a4-5678-4abc-8def-000000000007',
  'c1d2e3f4-5678-4abc-8def-000000000004',
  'ML',
  '{
    "text": "Обучите простую нейронную сеть на предоставленном датасете и загрузите файл с предсказаниями.",
    "dataset_url": "datasets/neural_network_training.csv",
    "submission_format": "CSV с колонкой ''prediction''"
  }'::jsonb,
  2
);


INSERT INTO task_option (id, task_id, option_text, is_correct) VALUES
-- Варианты для вопроса 1
('e1f2a3b4-5678-4abc-8def-000000000001', 'd1e2f3a4-5678-4abc-8def-000000000003', 'Модель для обработки изображений', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000002', 'd1e2f3a4-5678-4abc-8def-000000000003', 'Математическая модель, вдохновлённая биологическими нейронами', TRUE),
('e1f2a3b4-5678-4abc-8def-000000000003', 'd1e2f3a4-5678-4abc-8def-000000000003', 'Тип базы данных', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000004', 'd1e2f3a4-5678-4abc-8def-000000000003', 'Язык программирования', FALSE),

-- Варианты для вопроса 2
('e1f2a3b4-5678-4abc-8def-000000000005', 'd1e2f3a4-5678-4abc-8def-000000000008', 'Модель плохо обучается', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000006', 'd1e2f3a4-5678-4abc-8def-000000000008', 'Модель слишком хорошо запомнила обучающие данные и плохо работает на новых', TRUE),
('e1f2a3b4-5678-4abc-8def-000000000007', 'd1e2f3a4-5678-4abc-8def-000000000008', 'Ошибка в данных', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000008', 'd1e2f3a4-5678-4abc-8def-000000000008', 'Ошибка в алгоритме', FALSE),

-- Варианты для вопроса 3
('e1f2a3b4-5678-4abc-8def-000000000009', 'd1e2f3a4-5678-4abc-8def-000000000009', 'Обучение без заранее известных ответов', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000010', 'd1e2f3a4-5678-4abc-8def-000000000009', 'Обучение с использованием размеченных данных', TRUE),
('e1f2a3b4-5678-4abc-8def-000000000011', 'd1e2f3a4-5678-4abc-8def-000000000009', 'Обучение с помощью нейронных сетей', FALSE),
('e1f2a3b4-5678-4abc-8def-000000000012', 'd1e2f3a4-5678-4abc-8def-000000000009', 'Обучение без использования данных', FALSE);

INSERT INTO competition (id, title, description, image_url, start_date, end_date, difficulty_level, is_active) VALUES
('f1a2b3c4-5678-4abc-8def-000000000001', 'Титаник: Машинное обучение на основе катастрофы', 'Предсказать выживание на Титанике и познакомиться с основами машинного обучения.', 'http://localhost:8085/remote.php/webdav/resources/competition/com1.jpg', '2025-06-01T00:00:00+00', '2025-07-01T23:59:59+00', 3, TRUE),
('f1a2b3c4-5678-4abc-8def-000000000002', 'Цены на дома: Продвинутые методы регрессии', 'Предсказать цены продаж и попрактиковаться в продвинутых моделях регрессии.', 'http://localhost:8085/remote.php/webdav/resources/competition/com2.jpg', '2025-07-15T00:00:00+00', '2025-08-15T23:59:59+00', 6, TRUE),
('f1a2b3c4-5678-4abc-8def-000000000003', 'Распознавание цифр', 'Определить цифры на рукописных изображениях с помощью компьютерного зрения.', 'http://localhost:8085/remote.php/webdav/resources/competition/com3.jpg', '2025-08-01T00:00:00+00', '2025-09-01T23:59:59+00', 5, TRUE),
('f1a2b3c4-5678-4abc-8def-000000000004', 'Длительность поездок на такси в Нью-Йорке', 'Предсказать длительность поездок на такси в Нью-Йорке, используя временные ряды и геопространственные данные.', 'http://localhost:8085/remote.php/webdav/resources/competition/com4.jpg', '2025-09-10T00:00:00+00', '2025-10-10T23:59:59+00', 7, FALSE),
('f1a2b3c4-5678-4abc-8def-000000000005', 'Тестовое соревнование', 'Для новичков', 'http://localhost:8085/remote.php/webdav/resources/competition/com_test.jpg', '2023-02-10T00:00:00+00', '2028-10-10T23:59:59+00', 1, TRUE);
